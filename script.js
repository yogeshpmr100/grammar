// Complete set of 100 Grammar MCQs - Last updated: 2024-12-23 22:12:14

const questions = [
    {
        question: "Complete with correct question tag: You're coming to the party, _____? (Question Tag)",
        options: ["aren't you", "don't you", "won't you", "didn't you"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Complete with correct question tag: She rarely visits us, _____? (Question Tag)", 
        options: ["does she", "doesn't she", "did she", "didn't she"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Complete with correct question tag: Let's go for a walk, _____? (Question Tag)",
        options: ["shall we", "will we", "don't we", "can't we"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Complete with correct question tag: Nobody called, _____? (Question Tag)",
        options: ["did they", "didn't they", "did he", "didn't he"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Complete with correct question tag: I am late, _____? (Question Tag)",
        options: ["am I", "aren't I", "don't I", "wasn't I"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Complete with correct question tag: Everyone has arrived, _____? (Question Tag)",
        options: ["haven't they", "hasn't they", "have they", "has they"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "Complete with correct question tag: Nothing can be done, _____? (Question Tag)",
        options: ["can it", "can't it", "could it", "couldn't it"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Complete with correct question tag: He never helps, _____? (Question Tag)",
        options: ["does he", "doesn't he", "did he", "didn't he"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Complete with correct question tag: The children are playing, _____? (Question Tag)",
        options: ["aren't they", "are they", "weren't they", "don't they"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Complete with correct question tag: She must try again, _____? (Question Tag)",
        options: ["mustn't she", "must she", "shouldn't she", "should she"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Neither of the students _____ present. (Error Correction)",
        options: ["is", "are", "were", "have"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: One of my friends _____ coming today. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Each of the boys _____ gone. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The quality of these mangoes _____ good. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: A bunch of keys _____ missing. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Identify the type: When it rains, I stay inside. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Identify the type: It rained, and I stayed inside. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "What does 'burn the midnight oil' mean? (Idioms & Phrases)",
        options: ["Study late night", "Waste oil", "Work in dark", "Save electricity"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'break the ice' mean? (Idioms & Phrases)",
        options: ["Start conversation", "Feel cold", "Break something", "Cool down"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'in hot water' mean? (Idioms & Phrases)",
        options: ["In trouble", "Taking bath", "Feel warm", "Swimming"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Convert to exclamatory: The sunset is beautiful (Exclamatory Sentences)",
        options: ["How beautiful the sunset is!", "What a beautiful sunset!", "The sunset is beautiful!", "Beautiful sunset it is!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose correct exclamatory form: (Exclamatory Sentences)",
        options: ["What a day!", "It was such day", "The day was great", "Today is wonderful"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Choose the correct form: The committee _____ decided. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: Every boy and girl _____ present. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: None of them _____ arrived. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: The news _____ true. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Mathematics _____ difficult. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Either of these options _____ good. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: Many a student _____ failed. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: The team _____ playing well. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "What does 'once in a blue moon' mean? (Idioms & Phrases)",
        options: ["Very rarely", "Every month", "At night", "During moon"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'hit the nail on the head' mean? (Idioms & Phrases)",
        options: ["Exactly right", "Do carpentry", "Hurt someone", "Make mistake"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'spill the beans' mean? (Idioms & Phrases)",
        options: ["Reveal secret", "Drop food", "Cook badly", "Clean mess"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'cold feet' mean? (Idioms & Phrases)",
        options: ["Nervous", "Feel cold", "Sick", "Tired"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'face the music' mean? (Idioms & Phrases)",
        options: ["Accept consequences", "Listen songs", "Play instrument", "Enjoy concert"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Half of the water _____ gone. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Some of the money _____ missing. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The majority _____ voted. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: Everyone _____ left. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Nobody _____ answered. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The police _____ arrived. (Error Correction)",
        options: ["has", "have", "was", "is"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: The furniture _____ new. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The scissors _____ sharp. (Error Correction)",
        options: ["is", "are", "was", "has"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The data _____ correct. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: The criteria _____ clear. (Error Correction)",
        options: ["is", "are", "was", "has"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: Politics _____ interesting. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The media _____ reporting. (Error Correction)",
        options: ["is", "are", "was", "has"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Convert to exclamatory: The movie was scary (Exclamatory Sentences)",
        options: ["How scary the movie was!", "What a scary movie!", "The movie is so scary!", "Scary movie it was!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: She sings well (Exclamatory Sentences)",
        options: ["How well she sings!", "What a singer she is!", "She sings so well!", "Well sung it was!"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The child is clever (Exclamatory Sentences)",
        options: ["How clever the child is!", "What a clever child!", "The child is so clever!", "Clever child indeed!"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "Choose correct exclamatory form: (Exclamatory Sentences)",
        options: ["What a shame!", "It is shameful", "This is shame", "That was shameful"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Convert to exclamatory: The garden is lovely (Exclamatory Sentences)",
        options: ["How lovely the garden is!", "What a lovely garden!", "The garden is so lovely!", "Lovely garden it is!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "We should study, _____? (Question Tag)",
        options: ["shouldn't we", "should we", "don't we", "won't we"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "They've finished the work, _____? (Question Tag)",
        options: ["haven't they", "have they", "didn't they", "don't they"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "He's coming tonight, _____? (Question Tag)",
        options: ["isn't he", "is he", "wasn't he", "won't he"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "You'd help me, _____? (Question Tag)",
        options: ["wouldn't you", "would you", "couldn't you", "won't you"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "There's enough time, _____? (Question Tag)",
        options: ["isn't there", "is there", "wasn't there", "won't there"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'under the weather' mean? (Idioms & Phrases)",
        options: ["Feeling sick", "In rain", "Bad weather", "Outside"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'piece of cake' mean? (Idioms & Phrases)",
        options: ["Very easy", "Sweet food", "Dessert time", "Party item"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'bite off more than you can chew' mean? (Idioms & Phrases)",
        options: ["Take too much responsibility", "Eat too much", "Be greedy", "Work hard"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'let the cat out of the bag' mean? (Idioms & Phrases)",
        options: ["Reveal a secret", "Free a pet", "Make trouble", "Clean up"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'pull someone's leg' mean? (Idioms & Phrases)",
        options: ["Joke with someone", "Help walking", "Trip someone", "Exercise"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Identify the type: Although it rained, we went out. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "Identify the type: The sun rose and the birds sang. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Identify the type: When the bell rang, students left. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Identify the type: He worked hard but failed. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "Identify the type: Because it was late, we hurried home. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The night is beautiful (Exclamatory Sentences)",
        options: ["How beautiful the night is!", "What a beautiful night!", "The night is so beautiful!", "Beautiful night it is!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: He plays well (Exclamatory Sentences)",
        options: ["How well he plays!", "What a player he is!", "He plays so well!", "Well played it is!"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The view is amazing (Exclamatory Sentences)",
        options: ["How amazing the view is!", "What an amazing view!", "The view is so amazing!", "Amazing view it is!"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "Convert to exclamatory: The food tastes delicious (Exclamatory Sentences)",
        options: ["How delicious the food tastes!", "What delicious food!", "The food is so delicious!", "Delicious food it is!"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The baby is sweet (Exclamatory Sentences)",
        options: ["How sweet the baby is!", "What a sweet baby!", "The baby is so sweet!", "Sweet baby it is!"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "What does 'beat around the bush' mean? (Idioms & Phrases)",
        options: ["Avoid the main topic", "Hit something", "Walk in garden", "Clean area"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'cost an arm and a leg' mean? (Idioms & Phrases)",
        options: ["Very expensive", "Physical injury", "Medical bill", "Exercise cost"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'give someone the cold shoulder' mean? (Idioms & Phrases)",
        options: ["Ignore someone", "Feel cold", "Share food", "Help others"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'bite the bullet' mean? (Idioms & Phrases)",
        options: ["Face difficulty bravely", "Eat metal", "Get hurt", "Be afraid"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "What does 'kill two birds with one stone' mean? (Idioms & Phrases)",
        options: ["Achieve two things at once", "Hunt birds", "Be efficient", "Save time"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Identify the type: Since it was raining, we stayed home, but we watched movies. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 3,
        difficulty: "hard"
    },
    {
        question: "Identify the type: While I was sleeping, the phone rang. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Identify the type: The alarm rang and we woke up. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        question: "Identify the type: Before the sun rose, the birds began singing, and the wind was blowing. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 3,
        difficulty: "hard"
    },
    {
        question: "Identify the type: Whatever you do, be careful. (Complex & Compound Sentences)",
        options: ["Complex", "Compound", "Simple", "Compound-Complex"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The performance was brilliant (Exclamatory Sentences)",
        options: ["How brilliant the performance was!", "What a brilliant performance!", "The performance is so brilliant!", "Brilliant performance it was!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The weather is pleasant (Exclamatory Sentences)",
        options: ["How pleasant the weather is!", "What pleasant weather!", "The weather is so pleasant!", "Pleasant weather it is!"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "Convert to exclamatory: The flowers are beautiful (Exclamatory Sentences)",
        options: ["How beautiful the flowers are!", "What beautiful flowers!", "The flowers are so beautiful!", "Beautiful flowers they are!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The story was interesting (Exclamatory Sentences)",
        options: ["How interesting the story was!", "What an interesting story!", "The story was so interesting!", "Interesting story it was!"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Convert to exclamatory: The music sounds melodious (Exclamatory Sentences)",
        options: ["How melodious the music sounds!", "What melodious music!", "The music is so melodious!", "Melodious music it is!"],
        correctAnswer: 0,
        difficulty: "hard"
    },
    {
        question: "What does 'actions speak louder than words' mean? (Idioms & Phrases)",
        options: ["Deeds matter more than talk", "Speak loudly", "Be active", "Make noise"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'back to square one' mean? (Idioms & Phrases)",
        options: ["Start over again", "Play games", "Move backward", "Draw squares"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'better late than never' mean? (Idioms & Phrases)",
        options: ["Better to do something late than not at all", "Always be late", "Never be late", "Time management"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        question: "What does 'cry over spilt milk' mean? (Idioms & Phrases)",
        options: ["Regret past mistakes", "Clean up mess", "Waste milk", "Feel sad"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "What does 'every cloud has a silver lining' mean? (Idioms & Phrases)",
        options: ["Good aspects in bad situations", "Weather forecast", "Cloud watching", "Silver mining"],
        correctAnswer: 0,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The jury _____ divided in their opinion. (Error Correction)",
        options: ["is", "are", "was", "has"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: A series of accidents _____ occurred. (Error Correction)",
        options: ["have", "has", "were", "are"],
        correctAnswer: 1,
        difficulty: "hard"
    },
    {
        question: "Choose the correct form: Ten dollars _____ too much for this book. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: The United States _____ a powerful nation. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        question: "Choose the correct form: Bread and butter _____ my favorite breakfast. (Error Correction)",
        options: ["are", "is", "were", "have"],
        correctAnswer: 1,
        difficulty: "hard"
    }
];


let currentQuestion = 0;
let score = 0;
let timeLeft = 1800; // 30 minutes
let timer;
let answeredQuestions = new Array(100).fill(false);

// Initialize Quiz
function initializeQuiz() {
    loadQuestion();
    startTimer();
    createQuestionGrid();
    updateProgress();
    
    document.getElementById('menuToggle')?.addEventListener('click', () => {
        document.getElementById('sidebar')?.classList.toggle('active');
    });

    setTimeout(() => {
        const welcomeAnimation = document.querySelector('.welcome-animation');
        if (welcomeAnimation) {
            welcomeAnimation.style.display = 'none';
        }
    }, 4000);
}

function loadQuestion() {
    const question = questions[currentQuestion];
    const questionText = document.getElementById('questionText');
    const optionsGrid = document.getElementById('optionsGrid');
    const currentQuestionNum = document.getElementById('currentQuestionNum');

    if (questionText && optionsGrid && currentQuestionNum) {
        questionText.textContent = question.question;
        currentQuestionNum.textContent = currentQuestion + 1;

        optionsGrid.innerHTML = '';
        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option';
            button.onclick = () => checkAnswer(index);
            button.innerHTML = `
                <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                <span class="option-text">${option}</span>
            `;
            optionsGrid.appendChild(button);
        });
    }

    updateNavigationButtons();
}

function checkAnswer(selectedIndex) {
    if (answeredQuestions[currentQuestion]) return;

    const question = questions[currentQuestion];
    const options = document.getElementsByClassName('option');

    if (selectedIndex === question.correctAnswer) {
        options[selectedIndex].classList.add('correct');
        score++;
        showFeedback(true);
    } else {
        options[selectedIndex].classList.add('wrong');
        options[question.correctAnswer].classList.add('correct');
        showFeedback(false);
    }

    answeredQuestions[currentQuestion] = true;
    updateScore();
    updateProgress();
    updateQuestionGrid();
    
    if (answeredQuestions.filter(Boolean).length === questions.length) {
        showResults();
    }
}

function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion();
        updateProgress();
    }
}

function previousQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
        updateProgress();
    }
}

function startTimer() {
    clearInterval(timer);
    timer = setInterval(() => {
        if (timeLeft > 0) {
            timeLeft--;
            updateTimer();
        } else {
            clearInterval(timer);
            showResults();
        }
    }, 1000);
}

function updateTimer() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    const timeLeftElement = document.getElementById('timeLeft');
    if (timeLeftElement) {
        timeLeftElement.textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
}

function updateProgress() {
    const progress = ((currentQuestion + 1) / questions.length) * 100;
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    if (progressFill && progressText) {
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${currentQuestion + 1}/100`;
    }
}

function updateScore() {
    const scoreElements = document.querySelectorAll('#score');
    scoreElements.forEach(element => {
        element.textContent = score;
    });
}

function showFeedback(isCorrect) {
    const feedbackModal = document.createElement('div');
    feedbackModal.className = `feedback-modal ${isCorrect ? 'correct' : 'wrong'}`;
    feedbackModal.textContent = isCorrect ? 'Correct!' : 'Incorrect!';
    
    document.body.appendChild(feedbackModal);
    
    setTimeout(() => {
        feedbackModal.remove();
    }, 2000);
}

function createQuestionGrid() {
    const grid = document.getElementById('questionGrid');
    if (grid) {
        grid.innerHTML = '';
        questions.forEach((_, index) => {
            const button = document.createElement('button');
            button.className = 'question-number';
            button.onclick = () => jumpToQuestion(index);
            button.textContent = index + 1;
            grid.appendChild(button);
        });
        updateQuestionGrid();
    }
}

function updateQuestionGrid() {
    const numbers = document.getElementsByClassName('question-number');
    Array.from(numbers).forEach((number, index) => {
        number.className = 'question-number';
        if (index === currentQuestion) number.classList.add('current');
        if (answeredQuestions[index]) number.classList.add('answered');
    });
}

function jumpToQuestion(index) {
    currentQuestion = index;
    loadQuestion();
    updateProgress();
    updateQuestionGrid();
}

function updateNavigationButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    if (prevBtn && nextBtn) {
        prevBtn.disabled = currentQuestion === 0;
        nextBtn.disabled = currentQuestion === questions.length - 1;
    }
}

function showResults() {
    clearInterval(timer);
    
    const resultsModal = document.getElementById('resultsModal');
    const finalScore = document.getElementById('finalScore');
    const accuracy = document.getElementById('accuracy');
    const timeTaken = document.getElementById('timeTaken');
    
    if (resultsModal && finalScore && accuracy && timeTaken) {
        const accuracyValue = ((score / questions.length) * 100).toFixed(1);
        const timeSpent = 1800 - timeLeft;
        
        finalScore.textContent = `${score}/100`;
        accuracy.textContent = `${accuracyValue}%`;
        timeTaken.textContent = 
            `${Math.floor(timeSpent / 60)}:${(timeSpent % 60).toString().padStart(2, '0')}`;
        
        resultsModal.classList.add('show');
    }
}

function restartQuiz() {
    currentQuestion = 0;
    score = 0;
    timeLeft = 1800;
    answeredQuestions = new Array(100).fill(false);
    
    const resultsModal = document.getElementById('resultsModal');
    if (resultsModal) {
        resultsModal.classList.remove('show');
    }
    
    updateQuestionGrid();
    updateProgress();
    updateScore();
    
    clearInterval(timer);
    startTimer();
    
    loadQuestion();
    
    showFeedback(true, 'Quiz Restarted! Good Luck!');
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
        nextQuestion();
    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
        previousQuestion();
    } else if (e.key >= '1' && e.key <= '4') {
        checkAnswer(parseInt(e.key) - 1);
    }
});

window.onload = initializeQuiz;
